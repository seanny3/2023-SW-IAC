<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>Video Streaming</title>
    <link rel="stylesheet" href="{{url_for('static', filename='css/reset.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}">
    <link rel="stylesheet" href="../static/css/style.css">
    <link rel="stylesheet" href="../static/css/reset.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.2/socket.io.min.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="video-container">
        <div class="video-method-header">
          <div class="video-type">
            <button id="loading-cam" class="btn btn-primary" type="button" disabled>
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </button>
            <button id="cam" class="btn btn-outline-primary">웹캠</button>
            <button id="loading-video" class="btn btn-primary" type="button" disabled>
              <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            </button>
            <button id="video" class="btn btn-outline-primary">비디오</button>
          </div>
          <div class="opencv-func-category">
            <div class="btn-group dropend">
              <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                기능
              </button>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">기능 1</a></li>
                <li><a class="dropdown-item" href="#">기능 2</a></li>
                <li><a class="dropdown-item" href="#">기능 3</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#">초기화</a></li>
              </ul>
            </div>
          </div>
        </div>
        <img src="/cam" alt="동영상을 업로드 하세요.">
        <div class="video-upload-form">
          <form action="/upload" method="post" enctype="multipart/form-data">
            <input type="file" name="file">
            <input type="submit" value="업로드">
          </form>
        </div>
      </div>

    </div>

    <script>
      document.getElementById('cam').style.display = 'none';
      document.getElementById('loading-video').style.display = 'none';

      $("#cam").click(() => {
        document.querySelector(".video-container > img").setAttribute("src", "/cam");
        document.getElementById('loading-cam').style.display = 'block';
        document.getElementById('cam').style.display = 'none';
        document.getElementById('loading-video').style.display = 'none';
        document.getElementById('video').style.display = 'block';
      })
      $("#video").click(() => {
        document.querySelector(".video-container > img").setAttribute("src", "/video");
        document.getElementById('loading-cam').style.display = 'none';
        document.getElementById('cam').style.display = 'block';
        document.getElementById('loading-video').style.display = 'block';
        document.getElementById('video').style.display = 'none';
      })
    </script>
    <script>
      
    </script> 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>
</html>